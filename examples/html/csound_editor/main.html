<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Windows (vers 25 March 2009), see www.w3.org">

  <title>Csound Editor for NW.js</title>
  <script src="zepto.min.js" type="text/javascript">
</script>
  <script src="editor.js" type="text/javascript">
</script>
  <script src="cm/lib/codemirror.js" type="text/javascript">
</script>
  <script src="cm/mode/css/css.js" type="text/javascript">
</script>
  <script src="cm/mode/xml/xml.js" type="text/javascript">
</script>
  <script src="cm/mode/javascript/javascript.js" type=
  "text/javascript">
</script>
  <script src="cm/mode/htmlmixed/htmlmixed.js" type=
  "text/javascript">
</script>
  <link rel="stylesheet" href="style.css" type="text/css">
  <link rel="stylesheet" href="cm/lib/codemirror.css" type=
  "text/css">
  <link rel="stylesheet" href="cm/theme/lesser-dark.css" type=
  "text/css">
</head>

<body>
  <div class="buttons">
    <button id="new">New</button>
    <button id="open">Open...</button>
    <button id="save">Save...</button>
    <button id="run" onclick="csound_run()">Run</button>
    <button id="stop" onclick="csound_stop()">Stop</button>
  </div>

  <div id="editor"></div>

  <div class="info">
    <label>Filename:</label> <span id="title"></span>
    <label>Mode:</label> <span id="mode"></span>
  </div>

  <form>
    <input style="display:none;" id="openFile" type="file">
    <input style="display:none;" id="saveFile" type="file" nwsaveas="">
    <script type="text/javascript">
    </script>
  </form>
  <script type="text/javascript">
    var csound = require('csound');
    var gui = require('nw.gui');
    var csound_window = null;
      function csound_run()
      {
        console.log('csound_run()...');
        console.log('csound:' + csound);
        var filename = document.getElementById('title').innerHTML;
        console.log('filename:' + filename);
        csound_window = gui.Window.open(filename, {
  position: 'center'
});
        if (filename.endsWith('.csd')) {
            csound_window.csound = csound;
            console.log('csound_window.csound:' + csound_window.csound);
       }
        //csound_window.moveBy(100, 100);

      }
      function csound_stop()
      {
        console.log('csound_stop()...');

      }
  </script>
  </body>
  </html>

% C S O U N D   5   A P I   R E F E R E N C E   M A N U A L 
% The manual is produced from 2 sources: this header document for new features and users' guide, 
% and autogenerated Doxygen LaTeX files for Csound API reference documentation. To produce the entire manual:
% 1. Run Doxygen in the csound5 directory. It will produce LaTeX output that includes the contents of this file,
%    as well as API documentation automatically generated from various Csound and CsoundVST header files.
% 2. Doxygen will produce a doc/csound/latex/refman.tex file. Run pdflatex on this file to generate csound.pdf. You can
%    also run tex4ht on this file to produce an HTML form of the manual. Be sure to run in a mode that skips right on past
%    all the hundreds of LaTeX errors!
% 3. Steps 1 and 3 are automated in SConstruct with the generatePdf=1 option.
\documentclass[10pt,letterpaper,onecolumn]{scrbook}
\usepackage{tocloft}
\usepackage{stdclsdv}
\usepackage{comment}
\usepackage{vmargin}
\usepackage{t1enc}
\usepackage{fancyvrb}
\usepackage{url}
\usepackage{calc}
\usepackage{array}
\usepackage{scrpage2}
\usepackage[pdftex]{graphicx}
\usepackage{color}
\usepackage{listings}
\usepackage[latin1]{inputenc}
\usepackage[english]{babel}
\usepackage{doxygen}
\usepackage{supertabular}
\usepackage[pdftex,
            pagebackref=true,
            colorlinks=true,
            linkcolor=blue,
            pdfpagelabels,
            pdfstartpage=3
           ]{hyperref}
\pagestyle{scrheadings}
\makeindex
\definecolor{LstColor}{cmyk}{0.1,0.1,0,0.025} 
\setlength{\cftsecnumwidth}{4em}
\lstset{language=c++,basicstyle=\ttfamily\scriptsize,commentstyle=\ttfamily\scriptsize,tabsize=2,breaklines,backgroundcolor=\color{LstColor},fontadjust=true,fancyvrb=true,moredelim=[is][\textbf]{\\emph\{}{\}}}.
\setcounter{tocdepth}{1}
\begin{document}

\frontmatter

\title{Csound and CsoundVST \\ API Reference Manual} 
\author{\emph{By} \\ Michael Gogins \\ \texttt{gogins@pipeline.com} \\ }

\maketitle

\tableofcontents[2]

\frontmatter

\mainmatter



\pagenumbering{arabic}


\setcounter{page}{1}



\part{Licenses}

\chapter{Csound and CsoundVST}

Csound is \copyright 1991--2003 by Barry Vercoe and John ffitch.

CsoundVST is \copyright 2001--2004 by Michael Gogins.

Csound and CsoundVST are free software; you can redistribute them and/or modify them under the terms of the GNU Lesser General Public License as published by the Free Software Foundation; either version 2.1 of the License, or (at your option) any later version.

Csound and CsoundVST are distributed in the hope that they will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License along with Csound and CsoundVST; if not, write to the Free Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA.

\chapter{Manual}

Permission is granted to copy, distribute and/or modify this document under the terms of the
GNU Free Documentation License, Version 1.2 or any later version published by the Free Software
Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts. 

\part{API Reference}

\chapter{The Csound Application Programming Interfaces}

The Csound Application Programming Interface (API) reference is contained in the chapters following this one. The Csound API actually consists of several APIs:

\begin{itemize}

\item \emph{The basic Csound C API.} Include \texttt{csound.h} (page \pageref{csound_8h}) and link with \texttt{libcsound.a}.

\item \emph{The basic Csound C++ API.} Include \texttt{csound.hpp} (page \pageref{csound_8hpp}) and link with \texttt{libcsound.a}.

\item \emph{The CsoundVST C++ API.} Include \texttt{CsoundVST.hpp} (page \pageref{CsoundVST_8hpp}) and link with \verb|libCsoundVST.a|. The \texttt{CsoundVST} class (\ref{classCsoundVST}) contains an instance of the \texttt{CppSound} class (\ref{classCppSound}), which adds to the Csound C++ API a CsoundFile class (\ref{classCsoundFile}) for loading, saving, and editing Csound orchestra and score files, and a basic graphical user interface for editing Csound files and running Csound. This also provides a class hierarchy for doing algorithmic composition using Michael Gogins' concept of music graphs (also known as Silence).

\item \emph{The Csound Python API.} Import the \texttt{csnd} Python extension module. This provides a complete Python wrapper for \texttt{csound.hpp} (page \pageref{csound_8hpp}), \texttt{CppSound} (\ref{classCppSound}), and \texttt{CsoundFile} (\ref{classCsoundFile}). The Python API provides a complete Python wrapper for the entire Csound C++ API, and the Csound C++ API reference also serves as a reference to the Python API.

\item \emph{The CsoundVST Python API.} Import the \texttt{CsoundVST} Python extension module. The Python API provides a complete Python wrapper for the entire CsoundVST C++ API, including Silence, and the CsoundVST C++ API reference also serves as a reference to the Python API.

\item \emph{An experimental LISP API.} 

\end{itemize}

\section{An Example Using the Csound API}

The Csound command--line program is itself built using the Csound API. Its code reads in full as follows:

\begin{lstlisting}
#include "csound.h"

int main(int argc, char **argv)
{
    // Create Csound.
    void *csound = csoundCreate(0);
    // One complete performance cycle.
    int result = csoundCompile(csound, argc, argv);
    if(!result)
    {
        while(csoundPerformKsmps(csound) == 0){}
        csoundCleanup(csound);
    }
    // Destroy Csound.
    csoundDestroy(csound);
    return result;
}
\end{lstlisting}

\section{An Example Using the CsoundVST C++ API}

CsoundVST extends the Csound API with C++. There is a C++ class for the Csound API proper, another C++ class for manipulating Csound files in code, and additional classes for algorithmic composition based on music space. All these C++ classes also have a Python interface in the \texttt{CsoundVST} Python extension module.

You can build CsoundVST into your own software using the \texttt{\_CsoundVST} shared library and \texttt{CsoundVST.hpp} header file. For example, the CsoundVST stand-alone graphical user interface program is made this way:

\begin{lstlisting}
int main(int argc, char **argv)
{
		CsoundVST *csoundVST = CreateCsoundVST();
		AEffEditor *editor = csoundVST->getEditor();
		editor->open(0);
		if(argc == 2) {
		  csoundVST->openFile(argv[1]);
		}
		return csoundVST->run();
}
\end{lstlisting}

There is also a high-level C API for CsoundVST, declared in \url{frontends/CsoundVST/csoundvst\_api.h}. Any program able to interface with C calling convention functions can use this API. For example, a \textbf{\emph{Mathematica}} 5.0 notebook can use the .NET/Link package's \texttt{DefineDLLFunction} to access the CsoundVST API to create an instance of CsoundVST, load an orchestra, generate a score using the power of \textbf{\emph{Mathematica}}, and render that score.


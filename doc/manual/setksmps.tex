\begin{comment}
\documentclass[10pt]{article}
\usepackage{fullpage, graphicx, url}
\setlength{\parskip}{1ex}
\setlength{\parindent}{0ex}
\title{setksmps}
\begin{document}


\begin{tabular}{ccc}
The Alternative Csound Reference Manual & & \\
Previous & &Next

\end{tabular}

%\hline 
\end{comment}
\section{setksmps}
setksmps --  Sets the local ksmps value in a user-defined opcode block. \subsection*{Description}


  Sets the local ksmps value in a user-defined opcode block. 


  The \emph{setksmps}
 statement can be used to set the local \emph{ksmps}
 value of the user-defined opcode block. It has one i-time parameter specifying the new \emph{ksmps}
 value (which is left unchanged if zero is used). \emph{setksmps}
 should be used before any other opcodes (but allowed after \emph{xin}
), otherwise unpredictable results may occur. 
\subsection*{Syntax}


 \textbf{setksmps}
 iksmps
\subsection*{Initialization}


 \emph{iksmps}
 -- sets the local ksmps value. 


  If \emph{iksmps}
 is set to zero, the \emph{ksmps}
 of the caller instrument or opcode is used (this is the default behavior). 


 


\begin{tabular}{cc}
\textbf{Note}
 \\
  &

  The local \emph{ksmps}
 is implemented by splitting up a control period into smaller sub-kperiods and temporarily modifying internal Csound global variables. This also requires converting the rate of k-rate input and output arguments (input variables receive the same value in all sub-kperiods, while outputs are written only in the last one). 


\end{tabular}



 


\begin{tabular}{cc}
Warning &\textbf{Warning about local ksmps}
 \\
  &

  When the local \emph{ksmps}
 is not the same as the orchestra level \emph{ksmps}
 value (as specified in the orchestra header). Global a-rate operations must not be used in the user-defined opcode block. 


  These include: 


 
\begin{itemize}
\item 

 any access to ``ga'' variables

\item 

 a-rate zak opcodes (\emph{zar}
, \emph{zaw}
, etc.)

\item 

 \emph{tablera}
 and \emph{tablewa}
 (these two opcodes may in fact work, but caution is needed)

\item 

 The \emph{in}
 and \emph{out}
 opcode family (these read from, and write to global a-rate buffers)


\end{itemize}


  In general, the local \emph{ksmps}
 should be used with care as it is an experimental feature. Though it works correctly in most cases. 


\end{tabular}



  The \emph{setksmps}
 statement can be used to set the local \emph{ksmps}
 value of the user-defined opcode block. It has one i-time parameter specifying the new \emph{ksmps}
 value (which is left unchanged if zero is used). \emph{setksmps}
 should be used before any other opcodes (but allowed after \emph{xin}
), otherwise unpredictable results may occur. 
\subsection*{Performance}


  The syntax of a user-defined opcode block is as follows: 


 opcode  name, outtypes, intypes\\ 
 xinarg1 [, xinarg2] [, xinarg3] ... [xinargN]  xin\\ 
 [setksmps  iksmps]\\ 
 ... the rest of the instrument's code.\\ 
 xout  xoutarg1 [, xoutarg2] [, xoutarg3] ... [xoutargN]\\ 
 endop\\ 
       


  The new opcode can then be used with the usual syntax: 


 [xinarg1] [, xinarg2] ... [xinargN]  name  [xoutarg1] [, xoutarg2] ... [xoutargN] [, iksmps]\\ 
       
\subsection*{Examples}


  See the example for the \emph{opcode}
 opcode. 
\subsection*{See Also}


 \emph{endop}
, \emph{opcode}
, \emph{xin}
, \emph{xout}

\subsection*{Credits}


 Author: Istvan Varga, 2002; based on code by Matt J. Ingalls


 New in version 4.22
%\hline 


\begin{comment}
\begin{tabular}{lcr}
Previous &Home &Next \\
setctrl &Up &sfilist

\end{tabular}


\end{document}
\end{comment}
